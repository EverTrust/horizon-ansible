= evertrust.horizon.horizon
Doc Writer Adrien Ducourthial <adu@evertrust.fr>
v2.0, {docdate}
:version: 2.0
:imagesdir: ./images
:title-page:
:numbered:
:toc:

== Synopsis
The class horizon contains all the methods to use efficiently the API horizon.

== Requirements
The below requirements are needed on the host that executes this module.

* cryptography

== Functions
|===
| Name | Parameters | Return | Description

| *\\__init__* +
_private_
| authent +
_list of horizon authentication parameters_
| 
| Initialize the horizon authentication parameters

| *enroll* +
_public_
| content
| The response from the API
| Follow all the steps needed to enroll a certificate on horizon

| *recover* +
_public_
| content
| The response from the API
| Follow all the steps needed to recover a certificate on horizon

| *revoke* +
_public_
| content
| The response from the API
| Follow all the steps needed to revoke a certificate on horizon

| *update* +
_public_
| content
| The response from the API
| Follow all the steps needed to update a certificate on horizon

| *search* +
_public_
| content
| A list of certificate
| Follow all the steps needed to search certificates on horizon

| *feed* +
_public_
| content
|
| Follow all the steps needed to feed a certificate to horizon

| *certificate* +
_public_
| content
| Values of a certificate
| Follow all the steps needed to look up a certificate on horizon

| *get_key* +
_public_
| p12, password
| The public key of p12
| Get the public key from a PKCS12

| *get_hostnames* +
_public_
| certificate, hostnames
| The preferred identifier for the host
| Check all the hostnames and return the preferred one

| *\__debug* +
_private_
| response
| Boolean
| Catch the errors returned by the API

| *\__get_template* +
_private_
| endpoint, profile, workflow, module
| The template asked
| Get a template on the API horizon

| *\__check_password_policy* +
_private_
| password, template
| password
| Verify if the password given follow the password policy of the template

| *\__generate_json* +
_private_
| workflow, template, moodule, profile, password, certificate_pem, revocation_reason, csr, labels, sans, subject, key_type, campaign, ip, hostnames, operating_systems, paths, usages, query, fields, with_count, page_index
| dict
| Create a dictionnary readable by the API with all the fields given

| *\__post_request* +
_private_
| json, endpoint, feed
| The response of the API
| send a POST request to horizon

| *\__get_request* +
_private_
| endpoint, param
| The response of the API
| send a GET request to horizon

| *\__set_labels* +
_private_
| labels
| List of labels
| Set the labels on a format readable by the API

| *\__set_sans* +
_private_
| sans
| List of subject alternate names
| Set the subject alternate names on a format readable by the API

| *\__set_subject* +
_private_
| subject, template
| List of subject elements
| Set the subjects elements on a format readable by the API

| *\__set_query* +
_private_
| query
| query
| Set the query on a format readable by the API

| *\__set_fields* +
_private_
| fields
| List of fields
| Add necessary fields to optional fields

| *\__check_mode* +
_private_
| template, mode
| mode
| return the mode corresponding to the template

| *\__generate_PKCS10* +
_private_
| subject, key_type
| a PKCS10
| Create a PKCS10

| *\__generate_bi_key* +
_private_
| key_type
| a key pair
| Create a key pair

| *\__is_label_pref* +
_private_
| preference
| Boolean
| Verify the if the preference is a label

| *\__get_label_pref* +
_private_
| preference
| label
| return the label

| *\__format_response* +
_private_
| response, fields
| List of fields
| get the fields values from the response

| *\__set_certificate* +
_private_
| certificate_pem
| a certificate pem
| return the pem from a pem file

|===

== Status
=== Authors
- Evertrust R&D